@startdot

!define RANKSEP 1.3
!define EXPANDED

!include $lib/$block.iuml
!include $lib/$device.iuml
!include $lib/$term_block_3_level.iuml
!include $lib/$wire.iuml
!include $lib/$corr.iuml
!include $lib/$cable_3wire.iuml
!include $lib/$cable_4wire.iuml


digraph box {

label="Освещение ванной"
labelloc = "t"
fontname = "Helvetica"
fontsize = 28
rankdir  = "LR"

!ifndef RANKSEP
!define RANKSEP 2
!endif

graph [ ranksep=RANKSEP; ];


'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
' Устройства в щите
'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Питание
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

r_mi
$block_start()
!include circuit_breakers/cb_l_bathroom.iuml
$block_end()

N
PE

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Клеммники
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

subgraph cluster_r_hi {
  style=invis
  label="Клеммники"

  r_hi
  $block_start()
    !include terminals/l_bathroom.iuml
    !include terminals/s_bathroom.iuml
  $block_end()
}



'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
' Кабели
'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Кабель освещения
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
c_bathroom_l   $cable_4wire_power_alt("кабель<br/>4x1.5мм2<br/>свет ванная")

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Кабель на выключатель
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
c_bathroom_s   $cable_3wire("кабель<br/>3x1.5мм2<br/>выкл ванная")



'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
' Подключения в щите
'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Перемычки на клеммниках
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
r_hi:s_bathroom__top:w -> r_hi:l_bathroom__top:w            $wire(Black,         "4")
r_hi:s_bathroom__bot:w -> r_hi:l_bathroom__bot:w            $wire(Black,         "4")



'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
' Подключения кабелей к щиту
'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Подвод фазы с автомата на кабель к выключателю (постоянная фаза)
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
r_mi:cb_l_bathroom:w -> c_bathroom_s:i_brown                $wire(Brown,         "1.5") [label="Фаза\nпостоянная"]

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Подключение проводов кабеля выключателя (коммутируемые фазы) к клеммам
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
r_hi:s_bathroom__top:e -> c_bathroom_s:i_blue               $wire(Blue,         "1.5") [label="Фаза свет 1"]
r_hi:s_bathroom__bot:e -> c_bathroom_s:i_yg                 $wire(YellowGreen,  "1.5") [label="Фаза свет 2\n(не используется)"]

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Подсоединение проводов до ламп к клеммам и шинам
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
r_hi:l_bathroom__top:e -> c_bathroom_l:l1:w                 $wire(White,         "1.5")
N -> c_bathroom_l:n:w                                       $wire(Blue,          "1.5")
PE -> c_bathroom_l:pe:w                                     $wire(YellowGreen,   "1.5")

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Подвод фазы с автомата на кабель освещения (постоянная фаза)
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
r_mi:cb_l_bathroom:w -> c_bathroom_l:l2                     $wire(Red,           "1.5") [label="Фаза\nпостоянная"]



'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
' Промежуточные устройства
'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Гильзы
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
subgraph cluster_cc {
  style    = rounded
  color    = lightgray
  label    = "распред. коробка\nгильзы ГМЛ"
  fontsize = 14

  CC_L   [shape="cylinder" label="L_CONST" ]
  CC_N   [shape="cylinder" label="N" ]
  CC_PE  [shape="cylinder" label="PE"]
  CC_L1  [shape="cylinder" label="L_LAMP"]
}



'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
' Оконечные устройства
'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████

VENT  $ventilator()
LAMP  $light_fixture_single("Лампы")
MIRR  $light_fixture_single("Подсветка<br/>зеркала")



'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
' Подключение промежуточных и оконечных устройств
'███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Подсоединение выключателей к кабелю (клавиши)
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
c_bathroom_s:i_brown:e -> c_bathroom_s:i_blue:e [label="Клавиша выключателя"]

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Подсоединение гильз к кабелю в распред. коробке
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
c_bathroom_l:l2:e -> CC_L                        $wire(Red,           "1.5")
c_bathroom_l:l1:e -> CC_L1                       $wire(White,         "1.5")
c_bathroom_l:n:e  -> CC_N                        $wire(Blue,          "1.5")
c_bathroom_l:pe:e -> CC_PE                       $wire(YellowGreen,   "1.5")

'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
' Подсоединение потребителей к гильзам
'━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

CC_L1             -> LAMP:l                      $wire(Brown,         "1.5")
CC_N              -> LAMP:n                      $wire(Blue,          "1.5")
CC_PE             -> LAMP:pe                     $wire(YellowGreen,   "1.5")

CC_L1             -> VENT:light                  $wire(White,         "1.5")
CC_L              -> VENT:l                      $wire(Red,           "1.5")
CC_N              -> VENT:n                      $wire(Blue,          "1.5")
CC_PE             -> VENT:pe                     $wire(YellowGreen,   "1.5")

CC_L              -> MIRR:l                      $wire(Brown,           "1.5")
CC_N              -> MIRR:n                      $wire(Blue,          "1.5")
CC_PE             -> MIRR:pe                     $wire(YellowGreen,   "1.5")

}
@enddot
